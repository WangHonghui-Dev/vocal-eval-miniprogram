<!-- ä¸»å®¹å™¨ -->
<scroll-view class="container" scroll-y="true" style="height: 100vh;">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
    <view class="header">
        <text class="title">å£°ä¹è¯„ä¼°å½•éŸ³</text>
    </view>
    <!-- å‚è€ƒæ­Œæ›²æ˜¾ç¤ºåŒº -->
    <view class="song-info">
        <view class="song-item">
            <text class="music-icon">ğŸµ</text>
            <text class="song-text">å‚è€ƒæ­Œæ›²ï¼š{{songName}} - {{artist}}</text>
        </view>
    </view>
    <!-- å½•éŸ³æ§åˆ¶æ ¸å¿ƒåŒºåŸŸ -->
    <view class="record-section">
        <!-- å½•éŸ³æŒ‰é’® -->
        <button class="record-btn {{isRecording ? 'recording' : ''}}" bind:tap="handleRecordClick" disabled="{{isSubmitting}}">
            {{isRecording ? 'åœæ­¢å½•éŸ³' : 'å¼€å§‹å½•éŸ³'}}
        </button>
        <!-- å½•éŸ³æ—¶é•¿æ˜¾ç¤º -->
        <view class="duration-display" wx:if="{{isRecording || hasRecorded}}">
            <text class="duration-text">{{recordTimeText}}</text>
        </view>
    </view>
    <!-- éŸ³é¢‘é¢„è§ˆåŒº -->
    <view class="audio-preview" wx:if="{{hasRecorded && tempFilePath}}">
        <view class="preview-title">
            <text class="preview-text">å½•éŸ³é¢„è§ˆ</text>
        </view>
        <!-- éŸ³é¢‘æ’­æ”¾å™¨ -->
        <view class="audio-player">
            <view class="audio-controls">
                <button class="play-btn {{isPlaying ? 'playing' : ''}}" bind:tap="togglePlay">
                    {{isPlaying ? 'â¸ï¸' : 'â–¶ï¸'}}
                </button>
                <view class="audio-info">
                    <text class="audio-time">{{currentTime}} / {{duration}}</text>
                </view>
            </view>
        </view>
        <!-- é‡å½•æŒ‰é’® -->
        <view class="retry-section">
            <button class="retry-btn" bind:tap="retryRecord">
                <text class="retry-icon">ğŸ”„</text>
                <text class="retry-text">é‡æ–°å½•åˆ¶</text>
            </button>
        </view>
    </view>
    <!-- åº•éƒ¨å ä½ï¼Œé˜²æ­¢å†…å®¹è¢«åº•éƒ¨æŒ‰é’®é®æŒ¡ -->
    <view class="bottom-placeholder" wx:if="{{hasRecorded}}"></view>
</scroll-view>
<!-- æäº¤è¯„ä¼°æŒ‰é’® -->
<view class="submit-section" wx:if="{{hasRecorded}}">
    <button class="submit-btn {{isSubmitting ? 'submitting' : ''}}" bind:tap="submitEvaluation" disabled="{{isSubmitting}}">
        {{isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤è¯„ä¼°'}}
    </button>
</view>